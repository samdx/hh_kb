GIỚI THIỆU
----------------

### Tổ Chức Tiêu Chuẩn và Hệ Mở OSI (Open Systems Interconnection Reference Model)

Tổ chức tiêu chuẩn quốc tế (ISO-International Standards Organization),
trụ sở tại Geneva-Thụy Sĩ. Ra đời từ năm 1977, tổ chức này qui định các
tiêu chuẩn trên nhiều lĩnh vực như kinh doanh, sản xuất, khoa học công
nghệ… và phối hợp hoạt động tại nhiều quốc gia đã đề ra tiêu chuẩn liên
lạc dựa trên lý thuyết kiến trúc hệ mở để lập ra các mạng điện toán, mô
hình được gọi là hệ mở OSI, mô hình này được công nhận là khung sườn để
phân tích và phát triển thiết bị, linh kiện cho hoạt động trên mạng.

1.  Qui Trình Liên Lạc

- Các mạng đều dựa vào nhiều nguyên lý để trao đổi thông tin, một số
    qui trình được các mạng chuẩn điều hành như sau:

- Qui trình để tạo liên lạc và ngắt liên lạc.

- Tín hiệu dùng để trình bày dữ liệu trên phương tiện truyền thông.

- Loại tín hiệu được dùng.

- Phương pháp truy nhập để chuyển tiếp một tín hiệu liên lạc.

- Phương pháp truyền trực tiếp một thông điệp.

- Thủ tục dùng để kiểm soát tốc độ truyền dữ liệu.

- Phương pháp dùng cho các hệ mạng khác nhau liên lạc được với nhau.

- Các cách bảo đảm cho thông điệp được nhận đúng cách.

MÔ HÌNH THAM CHIẾU OSI 
-----------------------------

Ra đời năm 1980 do Tổ chức Tiêu chuẩn Quốc tế (ISO) đề ra, mô hình OSI
định nghĩa kiến trúc nhiều tầng (lớp) nhằm lý giải cho kỹ thuật kết nối
truyền thông giữa các máy vi tính và thiết kế giao thức mạng giữa chúng.

Mô hình tham chiếu OSI là một cấu trúc thủ tục truyền tin qua 7 tầng, nó
qui định về giao diện giữa các tầng, tức qui định đặc tả về phương pháp
các tầng liên lạc với nhau. Điều này có nghĩa là cho dù các tầng được
soạn thảo và thiết kế bởi các nhà sản xuất, hoặc công ty khác nhau nhưng
khi được lắp ráp lại, chúng sẽ làm việc một cách dung hòa.

Mỗi tầng trong mô hình OSI sẽ thi hành các tác vụ của mình và cung cấp
các dịch vụ cho tầng ngay trên nó, đồng thời cũng có thể đòi hỏi dịch vụ
của tầng ngay dưới nó, và một tác vụ được thi hành qua các tầng trong mô
hình OSI như vậy thường được gọi là chồng giao thức, ví dụ: TCP/IP là
một chồng giao thức.

![](4.4-tong-quan-mo-hinh-osi-media/image1.png)
Mục đích của mô hình OSI là cho phép sự
tương giao giữa các hệ máy (platform) đa dạng được cung cấp bởi các nhà
sản xuất khác nhau. Mô hình cho phép tất cả các thành phần của mạng hoạt
động hòa đồng, bất kể thành phần ấy do ai tạo dựng. Bởi lý do đó nên mô
hình OSI cũng là tiêu chuẩn cho các nhà sản xuất, nhà kinh doanh theo
dõi sự phát triển thêm về các thiết bị mạng.

Mô hình OSI có 7 tầng như sau:

1.  Tầng vật lý (Physical)

2.  Tầng liên kết dữ liệu (Data-link)

3.  Tầng mạng (Network)

4.  Tầng vận chuyển (Transport )

5.  Tầng giao dịch, phiên (Session )

6.  Tầng trình bày (Presentation )

7.  Tầng ứng dụng (Application )

<!-- -->

1.  Sự Liên Lạc Giữa Các Tầng Ngang Hàng Trong Mô Hình OSI

Khi cần chuyển thông tin nội trong máy, thì mỗi tầng, qua thủ tục lại
nhận thêm thông tin. Thông tin thêm vào dưới dạng đầu đề (header) của
thông điệp gốc từ trên xuống từ trên xuống của mô hình OSI.

Để dễ hiểu hơn chúng ta hãy xem xét quá trình gửi và nhận một thông điệp
từ máy UNIX sang máy Macintosh như hình trên.

Đầu tiên tầng thứ 7 (Application) của máy UNIX nhận được một tác vụ,
một mệnh lệnh từ người dùng là chuyển một thông điệp sang máy Macintosh,
tầng này sẽ thực hiện xong công việc của nó và trước khi nó chuyển phần
công việc còn lại xuống cho tầng dưới, nó lập tức thêm vào thông điệp
một đầu đề (header) của nó; rồi khi lớp dưới nó, tầng thứ 6
(Presentation) làm tiếp phần công việc mà tầng thứ 7 chuyển cho nó, xong
việc và trước khi chuyển phần việc còn lại cho tầng phía dưới thì tầng 6
này cũng thêm vào thông điệp một đầu đề của nó; tầng thứ 5 (Transport)
cũng làm tiếp phần việc còn lại của tầng 6 chuyển xuống, xong, trước khi
chuyển xuống tầng dưới, nó cũng thêm vào thông điệp một đầu đề của nó;
quá trình cứ diễn ra tương tự cho đến tầng 1 (Physical), nhưng ở tầng 1
này, nó không thêm vào thông điệp một đầu đề của nó như các tầng ở trên
vì tầng một chỉ có trách nhiệm là lo đường truyền thông với máy
Macintosh mà thôi.

Vậy quá trình nhận của máy Macintosh thì sao? Khi tầng 1 của máy
nhận, nhận được thông điệp, nó chuyển lên cho tầng 2 trên nó, tầng này
sẽ bóc đầu đề của tầng 2 của máy gửi ra và thực hiện công việc của nó,
xong nó chuyển thông điệp lên cho phần trên kế tiếp nó; rồi tầng 3 của
máy nhận, việc đầu tiên cũng là bóc đầu đề của tầng 3 của máy gửi, làm
tiếp phần việc của mình, xong, nó lại chuyển phần việc còn lại cho tầng
trên kế tiếp nó; quá trình cứ diễn ra tương tự như vậy cho đến tầng 7,
và thông điệp sẽ được hiển thị cho người dùng. Như vậy chúng ta có những
nhận xét tổng quát sau:

Phía máy gửi:

- Nhận yêu cầu, thêm đầu đề và gửi đi.

Phía máy nhận:

- Chờ nhận tín hiệu từ máy gửi, gỡ bỏ đầu đề, xử lý các gói tin và
    hiển thị cho người dùng.

Chúng ta cũng hình dung qua ví dụ thực tế để dễ hiểu hơn quá trình gửi
và nhận cũng như quá trình liên lạc giữa các tầng trong mô hình OSI.

Ví dụ một người muốn gửi đi một lá thư, trước tiên anh ta phải cho lá
thư vào phong bì (đầu đề 1), sau đó anh ta ghi rõ địa chỉ bên ngoài
phong bì (đầu đề số 2), sau đó lá thư được người đưa thư cho vào gói
(đầu đề số 3), sau đó đem gói xuống xe (đường truyền dẫn) và lá thư được
chuyển đi. Ở đầu nhận, người bưu tá sẽ lấy lá thư ra khỏi gói (bóc đầy
đề số 3), sau đó người nhận sẽ nhận lá thư của mình dựa và địa chỉ trên
phong bì (đầu đề số 2 và số 3), cuối cùng là đọc lá thư.

Và quá trình gửi và nhận được chi tiết hơn qua hình vẽ sau:

Trong đó A: Đầu đề ứng dụng (Application header), P: Đầu đề trình bày
(Presentation header), S: Đầu đề tầng giao dịch, phiên (Session header),
T: Đầu đề vận chuyển (Transport header), N: Đầu đề mạng(Network header),
D: Đầu đề liên kết dữ liệu (Data-Link header).

1.  Thủ Tục Ngăn Xếp (Protocol Stacks)

Mô hình OSI tách tiến trình liên lạc của mạng thành tầng-lớp. Mỗi tầng
đại diện cho một loại việc tương ứng. Thủ tục ngăn xếp là công cụ của
tầng kiến trúc. Thủ tục và dịch vụ liên kết với thủ tục xếp tầng để
chuẩn bị truyền và nhận dữ liệu trên mạng.

Hai máy điện toán muốn liên lạc bằng thủ tục ngăn xếp, phải vận hành
tương thích để trao đổi với nhau, như ở ví dụ hình 2, ta thấy đường
truyền thông điệp khởi đi ở tầng vận chuyển với thủ tục ngăn xếp rồi
chuyển qua mạng trung gian và lên thủ tục ngăn xếp của máy nhận. Nếu có
tầng nào đó của máy nhận không hiểu được hoặc không tương thích với tầng
tương ứng ở máy gửi thì thông điệp không truyền tới được.

Hai máy không tương thích cũng được ví như hai người nói chuyện với
nhau, 1 người mù, 1 người điếc họ không hiểu được nhau thì họ sẽ phải
dùng cách khác. Vì người mù nói thì người điếc không nghe, ngược lại
người điếc ra dấu thì người mù không nhìn thấy.

Như vậy hai máy muốn liên lạc với nhau, thì máy nhận và máy gửi phải có
thủ tục ngăn xếp tương thích với nhau.


KHÁI NIỆM CÁC TẦNG OSI
-------------------------------

1.  Tầng Vật Lý – Physical Layer

Dù tầng vật lý không xác định phương tiện sử dụng, nhưng nó liên hệ với
mọi mặt truyền và nhận dữ liệu trên mạng truyền thông. Tầng này không
đòi hỏi dây cáp truyền là bạc, đồng hay vàng. Đặc biệt là nó liên hệ với
việc nhận và truyền “bit”(là đơn vị thông tin hoặc dung lượng nhớ). Tầng
này xác nhận vài tính chất của mạng vật lý sau đây:

- Kết cấu vật lý của mạng (Physical topology)

- Đặc điểm về cơ cấu và điện để dùng (điện thế trên phương tiện
    truyền dẫn)

- Truyền bít, mã hóa và đếm (bộ đếm) giờ.

Tầng này đề ra những yêu cầu về những phương tiện kỹ thuật cần thiết
trên phương diện vật lý và qui định về khoảng cách kết nối giữa máy nhận
và máy nhận, cũng như qui định về các chuẩn của các vật dùng để kết nối
(các đầu nối ) ví dụ như đầu nối RJ45, BNC connector, DB9, DB25…

Ở tầng vật lý sẽ có một số các thiết bị hoạt động ở tầng này như
sau:

Các thiết bị như: Repeater, HUB…Cũng nói thêm ra đây một số khái niệm
của các thiết bị này để chúng ta dễ hiểu rõ hơn.

Thiết bị Repeater-Bộ chuyển tiếp:

Thiết bị này chỉ đơn thuần là khuếch đại tín hiệu lên khi tín hiệu này
đang suy yếu và đi ngang nó. Có nghĩa là, khi tín hiệu truyền đi xa sẽ
yếu dần nên bộ chuyển tiếp này sẽ phục hồi lại các tín hiệu bằng cách
khuếch đại lên, nhằm để duy trì tín hiệu được truyền đi xa hơn, điều này
cũng có nghĩa là chúng ta sẽ sử dụng Repeater để làm tăng thêm chiều
dài, khoảng cách giữa máy nhận và máy gửi khi có nhu cầu.

Bộ chuyển tiếp chạy ở tầng vật lý vì tầng trên nó không cần phục hồi tín
hiệu. Nghĩa là nó chỉ chuyển đơn vị thông tin (bit) dữ liệu cho dù khung
dữ liệu có bị hỏng hóc, bị lỗi, nhiệm vụ chính của nó chỉ là giúp mạng
tăng lực truyền thông trên khoảng cách có hạn. Ưu điểm để sử dụng thiết
bị này là giá thành rẻ.

Thiết bị HUB

Thiết bị này chúng ta thường hay thấy được sử dụng trong mạng LAN, bởi
nhiệm vụ chính của nó cũng gần giống như thiết bị Repeater, là chỉ có
trách nhiệm khuyếch đại tín hiệu khi tín hiệu bị suy giảm, tuy nhiên vẫn
có rất nhiều nhược điểm, mà cụ thể nhược điểm lớn nhất là nó không thể
kiểm soát được các thông tin bị lỗi đi ngang qua nó và tín hiệu truyền
qua HUB thì được HUB truyền đi ở cơ chế toàn mạng (Broad cast).

1.  
    > Tầng Liên Kết Dữ Liệu – DataLink

Như ở tầng vật lý, chúng ta đều thấy các máy truyền thông điệp cho nhau
bằng đơn vị bit, tuy nhiên, quá trình truyền không đơn giản chỉ chuyển
đơn vị thông tin bít mà nó còn phải trải qua rất nhiều thao tác để làm
sao các bit thông tin này phải là các bit có đầy đủ ý nghĩa. Tầng liên
kết dữ liệu tiếp nhận thông điệp gọi là frames từ tầng ở trên nó, việc
đầu tiên của tầng Data link là gỡ các frame thành những đơn vị thông tin
(bít) để truyền tải đi và rồi ráp các bít đó lại thành frame ở bên máy
nhận.

Tầng này cũng có trách nhiệm là định địa chỉ, kiểm soát sai số, kiểm
đường nối đơn giữa mạng và thiết bị. Ngoài ra nó còn đảm trách nhiều
nhiệm vụ phức tạp khác, kết hợp với định địa chỉ và giao gói qua chương
trình vận chuyển qua mạng liên kết.

Theo tiêu chuẩn IEEE 802 của Viện Công Nghệ Điện và Điện Tử, chia tầng
Data link thành 2 lớp phụ (con) như sau:

- Điều khiển phương tiện truy cập-Media Access Control (MAC),
    nhiệm vụ của lớp MAC là điều khiển đa thiết bị, chia sẽ cùng một
    phương tiện truyền thông thông tin và gồm cả phương pháp kiểm đường
    truyền dẫn hoặc điều khiển cách truyền dữ liệu từ một thiết bị như
    card mạng NIC (Network Interface Card). Lớp này cũng cung cấp thông
    tin địa chỉ để liên lạc giữa các thiết bị mạng.

- Điều khiển liên kết lôgíc-Logical Link Control (LLC), lớp liên
    kết phụ này được lập nên để duy trì liên kết với các thiết bị
    thông tin. Lớp này cũng nhận biết được thông tin sẽ truyền đi qua
    các thiết bị mạng khác nhau protocol như thế nào để đóng gói các
    frame cho tương ứng.

Để hiểu rõ hơn, kỹ hơn tầng Data link này thì chúng ta hãy khảo sát qua
các quá trình truy cập phần cứng, định địa chỉ cũng như quá trình kiểm
soát lỗi và luồng tại tầng này như thế nào.

2.1 Truy cập phần cứng tại tầng Data link

Như đã trình bày, lớp phụ MAC của Data link sẽ có trách nhiệm điều khiển
việc truyền dữ liệu qua card mạng, do đó để truy cập mạng qua bộ card
thích ứng ở tầng liên kết dữ liệu gồm phương pháp điều khiển truy cập
kiểm đường truyền dẫn hoặc chuyển thẻ bài (token) và mạng tôpô
(topoloy). Tầng này cũng điều khiển phương pháp truyền dẫn đồng bộ hoặc
không đồng bộ.

2.2 Địa chỉ ở tầng Data link

Các thiết bị phần cứng tại tầng liên kết dữ liệu đều có một địa chỉ, địa
chỉ đó gọi là địa chỉ thiết bị vật lý-physical device address, là địa
chỉ liên kết với phần cứng trong máy tính.

Các tiêu chuẩn được ứng dụng trong một mạng quyết định khổ địa chỉ vì nó
kết hợp với cách truy cập môi trường truyền dẫn, các địa chỉ vật lý
thường được gọi chung là địa chỉ MAC-Media Access Control.

Do đặc thù của LAN là các gói tin sẽ được truyền đi cho tất cả các thiết
bị trong mạng. Nên khi nhận được thông điệp của gói tin thì các thiết bị
này đều đọc bên trong mỗi khung dữ liệu (frame) để xác định địa chỉ mà
khung đó gửi đến có phải cho mình hay không. Nếu địa chỉ đích trong
khung phù hợp với địa chỉ vật lý của thiết bị mạng đó thì khung sẽ được
chấp nhận, ngược lại, thì phần còn lại của khung sẽ không được chấp
nhận. Đây chỉ là trường hợp tổng quát cho tất cả các loại thiết bị
truyền dẫn, ngoại trừ thông tin được quảng bá bởi các thiết bị Router,
Bridge. Vì chúng sử dụng địa chỉ vật lý để điều chỉnh đường đi của
khung, nên các thiết bị này dùng để liên kết các thiết bị tại tầng Data
Link.

2.3 Điều khiển lỗi và luồng tại tầng DataLink

Điều khiển luồng: Sẽ xác định lượng dữ liệu truyền dẫn trong một
khoảng thời gian nhất định, việc này nhằm kiểm soát các thiết bị gửi
cùng một lúc quá nhiều gói tin đến máy nhận.

Điều khiển lỗi: Sẽ kiểm tra lỗi trong các khung thu được và yêu cầu
phát lại khung đó.

Việc điều khiển lỗi trong mạng thông tin thường xuất hiện ở một vài lớp
khác nhau trong mô hình OSI, tuy nhiên tại tầng liên kết dữ liệu việc
kiểm lỗi là rõ nhất nhằm đảm bảo các gói tin đến được nơi cần đến một
cách chính xác.

Và hình vẽ minh họa sau đây để dễ hình dung ra một khung dữ liệu tại
tầng Data link như thế nào.

Trong đó:

- MAC Header gồm: Source MAC–MAC của máy gửi, Destination MAC–MAC của
    máy nhận.

- IP Header gồm: Source IP-IP của máy gửi, Destination IP-IP của
    máy nhận.

- TCP gồm: Quy định protocol, Port, kiểu truyền là TCP hay UDP

- DATA: là nội dung gói tin cần gửi đi

- Trailer: Chứa các thông tin dùng để kiểm tra lỗi, điều khiển luồng
    và điều khiển lỗi.

Ví dụ: Một máy A (MAC A, IP A) gửi mail cho máy B (MAC B, IP B) thì bên
trong khung sẽ có dạng như sau:

1.  Tầng Mạng – Network

Tầng liên kết dữ liệu liên quan đến việc thông tin giữa các thiết bị
trên cùng một mạng. Các địa chỉ vật lý sử dụng là các khung dữ liệu địa
chỉ, mỗi thiết bị sẽ chịu trách nhiệm giám sát một mạng và nhận các
khung đến thiết bị đó.

Tầng mạng giữ nhiệm vụ thông tin với các thiết bị trên mạng khác để tạo
thành sự liên kết mạng. Vì liên kết mạng có thể được xây dựng với nhiều
mạng khác nhau. Tầng mạng sử dụng thuật toán định tuyến (router) để đưa
các gói tin từ mạng gốc đến mạng đích. Trong tầng mạng mỗi thiết bị được
gắn cho một địa chỉ mạng để định tuyến gói tin, nó sẽ kiểm soát quá
trình định địa chỉ và phân phối gói tin trên mạng.

Về căn bản, tầng mạng chịu tránh nhiệm phân phát các gói dữ liệu từ đầu
này sang đầu kia (end-to-end, từ nguồn đến đích), trong khi tầng liên
kết dữ liệu lại chịu trách nhiệm phân phát gói dữ liệu từ nút này sang
nút khác (hop-to-hop, giữa hai nút mạng trung gian có đường liên kết
(link) trực tiếp).

Tầng mạng cung cấp các phương tiện có tính chức năng và qui trình để
truyền các chuỗi dữ liệu có độ dài đa dạng từ nguồn tới đích, qua một
hay nhiều mạng máy tính, trong khi vẫn duy trì chất lượng dịch vụ
(quality of service) đòi hỏi bởi tầng vận chuyển. Tầng mạng thi hành
chức năng định tuyến, điều khiển lưu lượng dữ liệu, phân đoạn và hợp
đoạn mạng (network segmentation/desegmentation), và kiểm soát lỗi (error
control).

Tầng mạng xử lý việc truyền thông dữ liệu trên cả đoạn đường từ nguồn
đến đích, và đồng thời truyền bất cứ tin tức gì, từ bất cứ nguồn nào tới
bất cứ đích nào mà chúng ta cần. Nếu ở tầng mạng mà chúng ta không liên
lạc được với một địa điểm nào đấy, thì chúng ta chẳng còn cách nào để có
thể liên lạc được với nó.

3.1 Định Địa Chỉ Trên Mạng:

- Khi đã tìm ra địa chỉ vật lý của tầng liên kết dữ liệu, thì đó chỉ
    đơn giản là mới xác định được một thiết bị trên mạng. Trong các mạng
    lớn, việc phân bố dữ liệu mạng bằng địa chỉ vật lý không thực tế
    (giả sử nếu bộ thích ứng mạng phải kiểm tra từng gói gửi đến bất kỳ
    nơi nào trên Internet để tìm địa chỉ vật lý). Nó sẽ yêu cầu một
    phương pháp định tuyến (router) và lọc bỏ gói tin để giảm giao thông
    mạng và thời gian truyền dẫn. Tầng mạng sử dụng địa chỉ mạng logic
    để định tuyến cho các gói tin đến mạng nhất định trên mạng liên kết.

- Địa chỉ mạng logic được áp dụng trong suốt cấu hình mạng. Người
    thiết kế mạng phải đảm bảo tính chất duy nhất của mỗi địa chỉ mạng.

Tầng mạng còn cung cấp một địa chỉ dịch vụ gồm: Địa chỉ vật lý và địa
chỉ mạng logic trong khung dữ liệu. Ví dụ sau đây sẽ giúp chúng ta hiểu
rõ hơn địa chỉ này:

Giả sử có địa chỉ: 2Bis Đinh Tiên Hoàng, F. ĐaKao, Q.1, HCM…khi, nói đến
địa chỉ này về bưu chính thì tất cả các thông tin đó được xem là địa
chỉ. Nhưng, trong mạng, các thành phần khác nhau tạo thành địa chỉ đều
có tên. Địa chỉ điều khiển truy cập môi trường truyền (MAC) tương tự số
nhà 2Bis, địa chỉ mạng là tên đường-Đinh Tiên Hoàng, các thông tin liên
quan như F ĐaKao, Q1, HCM…trong trường hợp này như địa chỉ mạng logic.
Để phục vụ việc chuyển một lá thư nào đó đến số nhà này thì sẽ có mã
dịch vụ, và có thể giả sử như sau: 404, 2Bis, Đinh Tiên Hoàng, F ĐaKao,
Q1, HCM, như thế thì được gọi là địa chỉ dịch vụ.

3.2 Phân Phối Gói Tin

Một gói tin được truyền từ một máy nguồn trên mạng LAN và qua một loạt
các phân đoạn mạng LAN khác để đến máy đích thì tầng mạng có trách nhiệm
giám sát quá trình chọn đường truyền và phân phối gói tin đến đích, có
thể ví dụ như chúng ta chạy xe đến cơ quan, chúng ta có thể thay đổi
tuyến đường khác nhau vì các sự cố trên đường như kẹt xe, hoặc thay đổi
công việc, dựa theo đó chúng ta phải chọn tuyến đường đi cho thích hợp.

Một số thuật toán định tuyến trên tầng mạng:

- Chuyển mạch kênh (Circuit switching)

- Chuyển mạch tin (Message switching)

- Chuyển mạch gói (Packet switching)

3.2.1 Chuyển mạch kênh:

Thiết lập đường truyền cố định trong suốt quá trình truyền, cũng giống
như thiết bị chuyển mạch của tổng đài, nó thiết lập một đường truyền
giữa 2 thuê bao, nó tạo tuyến khi 2 thiết bị bắt đầu giao tiếp. Các
đường truyền phải đảm bảo độ tin cậy và tốc độ, nó cung cấp cho các
thiết bị một băng tần xác định nhưng có nhược điểm sau:

- Quá trình thiết lập kết nối các thiết bị lâu.

- Các tín hiệu khác không thể chia sẽ đường truyền đã lập. Vì vậy hiệu
    quả sử dụng dải băng thông kém. Điều này có thể sánh như việc đối
    thoại khi bạn đang sử dụng một đường dây thì người khác không thể
    dùng mặc dù bạn không truyền dữ liệu.

Các mạng chuyển mạch kênh cần đảm bảo độ rộng băng tần, vì vậy kiểu này
thường có giá thành cao.

3.2.2 Chuyển mạch tin:

Chuyển mạch tin xem mỗi bản tin hoàn toàn riêng biệt. Mỗi bản tin mang
địa chỉ của nơi đến và tại mỗi nút của chuyển mạch sử dụng thông tin này
để chuyển bản tin đến nút khác. Chuyển mạch tin được lập trình với các
thông tin liên quan đến các nút chuyển mạch trong mạng khác để chuyển
tin đến đích. Tùy thuộc vào điều kiện mạng mà các bản tin được gửi đi
theo các đường khác nhau.

Chuyển mạch tin thường được dùng trong thư điện tử vì việc phân phối thư
cho phép thời gian trễ, chuyển mạch tin thường sử dụng các thiết bị có
giá thành thấp và truyền trên những kênh có tốc độ thấp, một số ứng dụng
của nó như: định giờ làm việc, định lịch.

Ưu điểm:

- Các thiết bị thông tin có thể dùng chung kênh dữ liệu để nâng cao
    hiệu suất sử dụng dải tần.

- Có khả năng lưu trữ bản tin đến khi nó có kênh truyền, vì vậy giảm
    mật độ ùn tắc trên mạng.

- Thứ tự ưu tiên của bản tin dùng để điều khiển giao thông mạng.

- Định địa chỉ thông tin quảng bá sử dụng độ rộng dãi tần mạng hiệu
    quả nhờ việc phân phối thông tin đến nhiều đích.

Nhược điểm chính của nó là không phù hợp với các ứng dụng thự tế như
truyền dữ liệu, truyền thanh.

3.2.3 Chuyển mạch gói:

Bản tin được chia thành các phần nhỏ gọi là các gói. Mỗi gói gồm thông
tin địa chỉ nguồn, đích để chúng có thể tự định tuyến.

Chuyển mạch gói gần giống với chuyển mạch tin nhưng các nút phân biệt
các gói tin có cỡ giới hạn để các nút chuyển mạch quản lý dữ liệu trong
bộ nhớ. Như vậy các nút chuyển mạch không cần lưu giữa gói trên bộ nhớ
lâu nên tuyến đường của gói tin qua mạng sẽ nhanh và hiệu quả hơn so với
chuyển mạch tin.

Có hai phương pháp chuyển mạch gói: Chuyển gói dữ liệu và chuyển
mạch ảo

Chuyển gói dữ liệu:

Mỗi gói tin được định tuyến độc lập với nhau, mỗi nút chuyển mạch xác
định phần mạng sử dụng ở bước tiếp theo của tuyến. Nó có khả năng chuyển
mạch qua các nút bận để đạt được tốc độ truyền gói nhanh.

Chuyển mạch gói đáp ứng yêu cầu truyền lượng tin lớn và kích thước khung
nhỏ để phù hợp với tầng vật lý.

Chuyển mạch ảo:

Hoạt động dựa trên sự thiết lập một liên kết giữ hai thiết bị thông tin.
Khi bắt đầu một phiên kết nối, các thiết bị thỏa thuận các kích cỡ gói
tin, từ đó nó tạo tạo ra một kênh ảo là đường truyền định trước qua
mạng. Kênh ảo này luôn được duy trì đến khi ngừng thông tin, chúng được
phân biệt bằng việc lập một kênh logic “ảo” là mạng xử lý như qua một
kênh vật lý đã được lập giữa các thiết bị, thật sự không có kênh như vậy
nên mạng sẽ có giao diện kết nối vật lý đến các thiết bị cuối kênh.

Chuyển mạch ảo có ưu điểm sau:

- Sử dụng hiệu quả dãi thông để nhiều thiết bị có thể định tuyến gói
    tin qua các kênh trên mạng. Tại một thời điểm nó có thể định tuyến
    cho nhiều thiết bị đích hoặc điều chỉnh tuyến để đạt hiệu quả
    cao nhất.

- Vì bản tin không được lưu trữ tại các nút nên thời gian truyền sẽ
    ngắn hơn so với chuyển mạch tin.

3.3 Định hướng kết nối (connection-oriented) và phi kết nối
connectionless)

Lớp mạng trong mô hình OSI xác định tuyến để các gói tin từ máy nguồn
đến máy đích qua nhiều mạng LAN khác nhau. Việc phức tạp để kiểm tra địa
chỉ lớp mạng là phát sinh hai kiểu thông tin khác nhau trên mạng mà
chúng đều theo mô hình OSI

Loại kết nối có định hướng: Việc sửa lỗi và điều khiển dòng thực
hiện tại các nút trong đường truyền.

Loại phi kết nối: Các nút bên trong không tham gia vào quá trình sửa
lỗi và điều khiển lỗi.

Ví dụ, thư thường (snail mail) có tính phi kết nối, bởi vì chúng ta có
thể gửi một bức thư cho ai đó mà không cần người đó phải làm gì, và họ
sẽ nhận được bức thư. Trong khi đó, hệ thống điện thoại lại định hướng
kết nối, vì nó đòi hỏi người ở đầu bên kia nhấc máy điện thoại lên,
trước khi sự truyền tin được thiết lập. Giao thức tầng mạng của mô hình
OSI có thể định hướng kết nối hoặc phi kết nối. Tầng liên mạng của
TCP/IP (tương đương với tầng mạng OSI) chỉ hỗ trợ giao thức liên mạng
phi kết nối.

Địa chỉ toàn cầu (Global Addresses) là gì? 

Mỗi người trên mạng truyền thông cần có một địa chỉ duy nhất. Địa chỉ
này xác định người đó là ai. Địa chỉ này thường có cấu trúc phả hệ, vì
thế bạn có thể là "Nguyễn Văn An" đối với người thành phố Hồ Chí Minh,
hoặc "Nguyễn Văn An, TP.Hồ Chí Minh" đối với người ở Việt , hoặc "Nguyễn
Văn An, TP.Hồ Chí Minh, Việt " với mọi người trên toàn thế giới. Trong
mạng Internet, những địa chỉ này được gọi là số IP.

Làm thế nào để gửi chuyển tiếp một thông điệp? 

Đây là một vấn đề liên quan nhiều đến những ứng dụng di động, vì trong
những ứng dụng này, người dùng có thể nhanh chóng di chuyển từ nơi này
sang nơi khác, và chúng ta phải bố trí sao cho thông điệp của người ấy
đi theo họ. Phiên bản 4 của giao thức IP - (IPv4) - không thực sự hỗ trợ
việc này, cho dù nó cũng đã được người ta sửa đổi ít nhiều kể từ khi nó
bắt đầu đi vào hoạt động. Phiên bản 6 sắp tới, IPv6, có một giải pháp
được thiết kế tốt hơn, điều đó có thể làm cho loại ứng dụng này hoạt
động suôn sẻ hơn.

Để hiểu rõ sự khác biệt giữa 2 loại kết nối có định hướng và không kết
nối chúng ta cần xem xét sự khác nhau giữa tầng mạng va tầng liên kết dữ
liệu trong mô hình OSI. Trên lý thuyết, lớp liên kết dữ liệu có thể
truyền dữ liệu bằng liên kết đơn giản giữa hai nút. Tầng mạng xử lý việc
định tuyến gói tin qua nhiều nút đến đích bằng liên kết khác.

Ví dụ, bản tin của một máy tính trên mạng LAN qua nhiều đường đến một
máy ở xa mạng. Các nút bên trong đã định hướng cho một gói cùng hướng
gói đó đến nút đích. Trong phương pháp kết nối định hướng một chuỗi liên
kết giữa nút đích, nguồn tạo thành kiểu liên kết đường truyền logic. Nút
hướng một gói tin bám theo các gói đã liên kết. Như vậy các nút bên
trong có thể điều khiển luồng thông tin, khi dữ liệu truyền trên đường,
khi một nút bên trong nhận ra một sự kết nối không hoạt động, nó sẽ gửi
bảng thông báo với máy nguồn. Các nút bên trong còn hoạt động độc lập
nên khi có sự cố nút đó sẽ gửi bảng thông báo ngừng phát đến một trong
số máy kết nối với nó mà không dừng mọi thông tin qua nút đó. Phương
pháp này có thể sửa lỗi tại mỗi tuyến trong chuỗi. Do đó, khi một nút
phát hiện lỗi nó sẽ yêu cầu nút trước đó soát lại thông tin.

Phương pháp không kết nối không thực hiện quá trình sửa lỗi và phát lại
kịch bản tin như trên, các nút cuối sẽ xác nhận gói tin và phát lại khi
cần nhưng nút bên trong không tham gia vào việc điều khiển luồng, sửa
lỗi.

Ưu điểm của nó:

- Khả năng xử lý nhanh hơn, đơn giản hơn vì các nút trong chỉ chuyển
    dữ liệu đi mà không cần theo dõi.

- Yêu cầu phát lại hoặc điều khiển luồng.

Sự khác nhau giữa hai phương pháp này có thể ví dụ như sau:

Giả sử khi nói chuyện với một người, bạn đã chắc họ hiểu rõ những điều
bạn nói từng câu một. Phương pháp không kết nối (một) ví như cuộc nói
chuyện mà người nói chỉ theo dõi và biết người nghe đã hiểu. Còn loại
kết nối (hai) có định hướng chậm hơn và đáng tin cậy hơn. Phương pháp
(một) nhanh nhưng thiếu khả năng sửa lỗi (như hiểu lầm trong giao tiếp)
tuy nhiên nó cũng có nhược điểm:

- Thông tin có thể bị mất vì tràn bộ nhớ hoặc đường nối trục trặc.

- Nếu thông tin bị mất người gửi không nhận được thông báo.

- Việc phát lại để sữa chữa lỗi sẽ lâu hơn lúc truyền vì lỗi đã không
    được sửa qua một tuyến bên trong.

Điều cần lưu ý là mô hình OSI không phải các qui luật thông tin, nó là
khuôn mẫu để giải thích các kiểu thông tin. Vì vậy, bổ sung các thủ tục
không kết nối để giảm bớt một số nhược điểm. Lưu ý rằng dù phương pháp
(hai) tập trung việc giám sát lỗi và điều khiển giao thông nhưng nó
không kiêm luôn cả hai việc. Việc chọn một trong hai loại này tương quan
với các hệ thống khác, yêu cầu tốc độ, giá thành thiết bị.

1.  Tầng Vận Chuyển –Transport

Tầng vận chuyển là tầng thứ tư trong bảy tầng của mô hình OSI. Tầng này
chịu tránh nhiệm đáp ứng các đòi hỏi về dịch vụ của tầng phiên và đưa ra
các yêu cầu dịch vụ đối với tầng mạng.

Tầng này có thể giảm thủ tục để đưa thông tin đến các thiết bị đích một
các tin cậy. Thuật ngữ “tin cậy” không có nghĩa là không có lỗi mà lỗi
sẽ được kiểm tra. Ví dụ khi có lỗi bị mất dữ liệu, tầng vận chuyển có
thể yêu cầu phát lại hoặc thông báo đến tầng cao hơn.

Tầng mạng tạo các thủ tục để giao tiếp với mạng nhưng giấu đi sự phức
tạp của hoạt động mạng. Một trong những chức năng của lớp vận tải là
chia các bản tin dài thành các phần cho phù hợp với mạng.

Dịch Vụ Kết Nối Lớp Vận Chuyển

Một số dịch vụ được thực hiện trên một tầng trong mô hình OSI. Cùng với
tầng liên kết dữ liệu, mạng, tầng vận chuyển cũng góp vài chức năng cho
dịch vụ kết nối. Nó giao tiếp với dịch vụ kết nối định hướng và không
kết nối của tầng mạng, cung cấp một số đặc tính điều khiển cần thiết,
hoạt động lớp này gồm:

Đóng gói lại (repackaging): Khi bản tin dài được chia thành các phần
nhỏ truyền đi. Ở phía thu, trước khi khôi phục bản tin gốc thì lớp vận
chuyển phải đóng gói lại bản tin.

Điều khiển lỗi: Trong quá trình truyền các gói bị mất hoặc sao chép
các thiết bị tích hợp (integrated devices) thì lớp vận chuyển sẽ phát để
khôi phục lỗi. Nó kiểm tra các đoạn bị ngắt nhờ việc điều khiển lỗi với
kỹ thuật tổng kiểm tra.

Điều khiển luồng (end-to-end flow control) lớp này dùng sự ghi nhận
để giám sát việc điều khiển luồng giữa hai thiết bị được kết nối. Nó
cũng có thể yêu cầu phân đoạn gần nhất phát lại thông tin.

Tại tầng vận chuyển này có nhiều kỹ thuật truyền tải một gói tin từ máy
nguồn đến máy đích.

Tầng vận chuyển sẽ phân đoạn khối dữ liệu thành những đoạn nhỏ để truyền
đi, và các đoạn dữ liệu được chia nhỏ ra gọi là: Segment.

Các kỹ thuật truyền tải tại lớp này:

- Phi kết nối (Connectionless transmission)

- Định hướng kết nối (Connection oriented)

- Bắt tay 3 chiều (Three way handshake)

- Kiểm soát dòng (Flow Control)

- Xác thực khi truyền (Acknowledgement)

- Thỏa thuận trước khi truyền (Windowing)

Phi Kết Nối và Định hướng kết nối như đã được trình bày ở trên (ở tầng
mạng), ở đây chúng ta sẽ tìm hiểu các kỹ thuật khác.

4.1 Kỹ thuật truyền tải Handshake: 

Với kỹ thuật này thì, trước khi gửi và nhận thì các máy gửi và nhận phải
thỏa thuận với nhau việc kết nối như thế nào, nghĩa là máy gửi trước khi
gửi đi phải kết nối trực tiếp đến máy nhận bằng việc gửi kèm thông điệp
cần kết nối, gọi đó là gói Syn (Synchronize) và chờ sự hồi âm, gọi đó là
Ack (Acknowledgement) từ máy nhận có muốn thiết lập kết nối hay không
thì quá trình truyền tải mới xảy ra. Và quá trình bắt tay ba chiều được
minh họa như sau:

![](4.4-tong-quan-mo-hinh-osi-media/image5.png)

![](4.4-tong-quan-mo-hinh-osi-media/image5.png)


![](4.4-tong-quan-mo-hinh-osi-media/image5.png)


Hình trên minh họa quá trình thiết lập kết nối và truyền tải theo kiểu
Three Way Handshake.

4.2 Kỹ thuật truyền tải Kiểm Soát Dòng - Flow Control 

Hầu hết các nguyên nhân gây ra thất thoát (mất) gói tin khi truyền tải
là do máy nhận không nhận được các gói tin bị lỗi trên đường truyền. Các
gói tin bị mất khi truyền có thể được hiểu qua 2 nguyên nhân sau:

- Một, do máy gửi nằm trên dải băng thông rất lớn, có thể gửi đi cùng
    lúc rất nhiều gói tin, tuy nhiên, máy nhận lại nằm trên dải băng
    thông rất nhỏ, chỉ có thể tiếp nhận gói tin ở một giới hạn nào đó,
    dẫn đến có thể có nhiều gói tin được gửi đi mà không đến được máy
    nhận hay đến được mà không được xử lý nên thất thoát hay gây ra lỗi.
    Bởi, kỹ thuật này chẳng đòi hỏi máy nhận và gửi thỏa thuận đều
    gì cả.

- Hai, do cùng một thời điểm có rất nhiều máy gửi cùng gửi đến một máy
    nhận duy nhất, dẫn đến máy nhận tiếp nhận và xử lý không kịp các gói
    tin mà mình nhận được, dẫn đến gói tin cũng có thể bị thất lạc hay
    bị lỗi.

Cho nên để đảm bảo được chất lượng của việc gửi-nhận, các máy nhận được
trang bị thêm vùng nhớ đệm (buffer), nghĩa là thay vì nhận và xử lý các
gói tin trực tiếp thì bây giờ đã có bộ đệm đảm trách việc nhận trong khi
các máy nhận chỉ việc xử lý các gói tin được lấy ra từ bộ đệm và máy
nhận có trách nhiệm phải kiểm tra quá trình nhận của bộ đệm có quá tải
hay không, mà có biện pháp xử lý kịp thời.

Kỹ thuật này có thể được minh họa như sau:

![](4.4-tong-quan-mo-hinh-osi-media/image7.png)


![](4.4-tong-quan-mo-hinh-osi-media/image7.png)


4.3 Kỹ Thuật Xác Thực Khi Truyền (Acknowledgement)

Với kỹ thuật này khi máy gửi truyền thông tin cho máy nhận nó luôn chờ
máy nhận thông báo lại là có nhận được gói tin đó không rồi nó mới gửi
tiếp gói tin kế tiếp và lại chờ cho máy nhận xác nhận…quá trình sẽ cứ
như vậy cho đến khi quá trình truyền tải kết thúc và các gói tin bị lỗi
sẽ được máy nhận kiểm tra và có trách nhiệm thông báo để máy gửi gửi
lại. Quá trình truyền này có nhược điểm không nếu trên đường truyền
thông cùng lúc có rất nhiều quá trình giao thông khác đang diễn ra cùng
lúc? (ý muốn đề cập đến tốc độ và thời gian truyền).

Xin nói ngay, với kỹ thuật này thì quá trình truyền nhận có độ tin cậy
rất cao, bởi máy nhận luôn xác nhận lại với máy gửi là gói tin có đến
được đích hay không, tuy nhiên chúng ta giả sử nếu khối thông tin lớn và
tình hình đường truyền không rãnh lắm mà cứ gửi-chờ xác nhận-xác
nhận…thì quá trình này sẽ diễn ra rất chậm.

![](4.4-tong-quan-mo-hinh-osi-media/image7.png)


4.4 Kỹ Thuật Thỏa Thuận Trước Khi Truyền (Windowing)

Kỹ thuật này cũng tương tự vớ kỹ thuật Acknowledgement, tuy nhiên, có
cải tiến để đảm bảo 2 tiêu chí: Nhanh và Chính xác

Kỹ thuật này có cải tiến nhỏ như sau: Nó yêu cầu trước khi truyền và
nhận thì yêu cầu các máy gửi và nhận phải thỏa thuận trước một kích cỡ
cụ thể của gói tin mà máy gửi sẽ gửi và máy nhận sẽ nhận, như thế để
tránh việc gửi-chờ xác nhận-xác nhận sẽ làm chậm quá trình truyền, vì kỹ
thuật này sẽ qui ước máy gửi sẽ gửi đúng số lượng gói tin đã “thỏa
thuận” trước đó, rồi máy nhận mới xác nhận là nhận được đầy đủ hay không
hay thiếu gói nào, nếu thiếu thì sẽ gửi lại sau khi gửi hết những gói
còn lại. Như vậy, sẽ nhanh hơn, và cũng không kém phần tin cậy, bởi có
sự xác nhận của máy nhận.

![](4.4-tong-quan-mo-hinh-osi-media/image5.png)


1.  
    > Tầng Phiên –Session

Tầng này đáp ứng các yêu cầu dịch vụ của tầng trình diễn và gửi các yêu
cầu dịch vụ tới tầng vận chuyển.

Tầng phiên cung cấp một cơ chế để quản lý hội thoại giữa các tiến trình
ứng dụng của người dùng cuối. Tầng này hỗ trợ cả lưỡng truyền (full
duplex) và đơn truyền (half-duplex), và thiết lập các qui trình đánh dấu
điểm hoàn thành (checkpointing), trì hoãn (adjournment), kết thúc
(termination), và khởi động lại (restart).

Thông thường, tầng phiên hoàn toàn không được sử dụng, song có một vài
chỗ nó có tác dụng. Ý tưởng là cho phép thông tin trên các dòng (stream)
khác nhau, có thể xuất phát từ các nguồn khác nhau, được hội nhập một
cách đúng đắn. Cụ thể, tầng này giải quyết những vấn đề về đồng bộ hóa,
đảm bảo rằng không ai thấy các phiên bản không nhất quán của dữ liệu,
hoặc những tình trạng tương tự.

Một chương trình ứng dụng trực quan rõ ràng là chương trình hội thoại
trên mạng (web conferencing). Tại đây, chúng ta cần phải đảm bảo các
dòng dữ liệu âm thanh và hình ảnh khớp nhau, hay nói cách khác, chúng ta
không muốn gặp vấn đề lipsync (sự không đồng bộ giữa hình ảnh người nói
và âm thanh được nghe thấy). Chúng ta cũng còn muốn "điều khiển sàn"
(floor control), ví dụ như việc đảm bảo hình ảnh được xuất hiện trên màn
ảnh và lời nói được tiếp âm là của người phát biểu, hoặc được chọn theo
một tiêu chí nào đó khác.

Một ứng dụng lớn khác nữa là trong các chương trình truyền hình trực
tiếp, trong đó các dòng âm thanh và hình ảnh, phải được hòa nhập với
nhau một cách liền mạch, sao cho ta không có đến một nửa giây không phát
hình hay nửa giây mà hai hình được phát đồng thời.

Tóm lại: tầng phiên thiết lập, quản lý, và ngắt mạch (phiên) kết nối
giữa các chương trình ứng dụng đang cộng tác với nhau. Nó còn bổ sung
thông tin về luồng giao thông dữ liệu (traffic flow information).

![](4.4-tong-quan-mo-hinh-osi-media/image9.png)


1.  Tầng Trình Bày–Presentation

Tầng này đáp ứng những nhu cầu dịch vụ mà tầng ứng dụng đòi hỏi, đồng
thời phát hành những yêu cầu dịch vụ đối với tầng phiên.

Tầng trình diễn chịu trách nhiệm phân phát và định dạng dữ liệu cho tầng
ứng dụng, để dữ liệu được tiếp tục xử lý hoặc hiển thị. Tầng này giải
phóng tầng ứng dụng khỏi gánh nặng của việc giải quyết các khác biệt về
cú pháp trong biểu diễn dữ liệu. Chú ý: Ví dụ, một trong những dịch vụ
của tầng trình diễn là dịch vụ chuyển đổi tệp văn bản từ mã EBCDIC sang
mã ASCII.

Tầng trình diễn là tầng đầu tiên nơi người dùng bắt đầu quan tâm đến
những gì họ gửi, tại một mức độ trừu tượng cao hơn so với việc chỉ coi
dữ liệu là một chuỗi gồm toàn các số không và số một. Tầng này giải
quyết những vấn đề chẳng hạn như một chuỗi ký tự phải được biểu diễn như
thế nào - dùng phương pháp của Visual Basic ("13,mohinhOSI") hay phương
pháp của C/C++ ("mohinhOSI\\0").

Việc mã hoá dữ liệu cũng thường được thực hiện ở tầng này, tuy việc đó
có thể được thực hiện ở các tầng ứng dụng, tầng phiên, tầng vận chuyển,
hoặc tầng mạng; mỗi tầng đều có những ưu điểm và nhược điểm. Một ví dụ
khác, thông thường, việc biểu diễn cấu trúc được chuẩn hóa tại tầng này
và thường được thực hiện bằng cách sử dụng XML (Extensible Markup
Language). Cũng như các dữ liệu đơn giản, chẳng hạn chuỗi ký tự, các cấu
trúc phức tạp hơn cũng được chuẩn hóa ở tầng này. Hai ví dụ thường thấy
là các 'đối tượng' (objects) trong lập trình hướng đối tượng, và chính
phương pháp truyền tín hiệu video theo dòng (streaming video).

Trong những trình ứng dụng và giao thức được sử dụng rộng rãi, sự tách
biệt giữa tầng trình diễn và tầng ứng dụng hầu như không có. Chẳng hạn
HTTP (HyperText Transfer Protocol), vốn vẫn được coi là một giao thức ở
tầng ứng dụng, có những đặc tính của tầng trình diễn, chẳng hạn như khả
năng nhận diện các mã hệ dành cho ký tự để có thể chuyển đổi mã một cách
thích hợp. Việc chuyển đổi sau đó được thực hiện ở tầng ứng dụng.

1.  
    > Tầng Ứng Dụng–Application

Tầng này giao tiếp trực tiếp với các tiến trình ứng dụng và thi hành
những dịch vụ thông thường của các tiến trình đó; tầng này còn gửi các
yêu cầu dịch vụ tới tầng trình diễn.

Những dịch vụ thông thường của tầng ứng dụng cung cấp sự chuyển đổi về
ngữ nghĩa giữa các tiến trình ứng dụng có liên quan. Chú ý: những ví dụ
về các dịch vụ của trình ứng dụng thường được quan tâm bao gồm tệp ảo
(virtual file), thiết bị cuối ảo (virtual terminal), và các giao thức
dành cho việc thao tác và thuyên chuyển các tác vụ (manipulation and
transfer of batch processing jobs).

Chúng ta không nên nhầm lẫm về tầng ứng dụng rằng, tầng này có nhiệm vụ
chạy các chương trình ứng dụng của người dùng như xử lý văn bản, điều đó
sai. Tuy nhiên, lớp này cũng tạo ra một giao diện mà trình ứng dụng có
thể giao tiếp với mạng, nó là giao diện ứng dụng API (Application
Programming Interface).

Ở trên là phần trình bày các khái niệm của mô hình OSI, tuy nhiên, để
dễ hiểu và dễ hình dung hơn chúng ta đưa mô hình này vào phối cảnh như
sau:

Giả sử chúng ta đang ngồi trước máy tính của mình, sử dụng Microsoft
Word và bạn vừa mới chọn thao tác in tài liệu ra một máy in nối với máy
tính lân cận.

Chương trình xử lý văn bản sẽ gửi yêu cầu in ấn tới bộ đổi hướng
(Presentation Layer-tầng trình diễn). Từ đây nó bắt đầu thu thập dữ kiện
về nơi sẽ gửi tới. Thông tin này được chứa trong lớp session (phiên làm
việc), nơi mà một session đã được tạo ra bởi máy tính lân cận. Ở điểm
này các dữ liệu được chia thành các phần thông tin nhỏ hơn (Transport
Layer-tầng vận chuyển). Từ đây nó được đánh địa chỉ để có thể đến được
các máy tính khác(Network Layer-tầng mạng). Tiếp theo đó, nó được gửi
tới card mạng (Data link layer-tầng liên kết dữ liệu) để cho yêu cầu in
ấn được chuyển thành những tín hiệu truyền qua dây cáp mạng (physical
Layer-tầng vật lý)

Từ lúc này nó có thể sẽ phải qua một số thiết bị lặp nếu dây cáp mạng
kéo dài. Các gói dữ liệu cũng có thể phải truyền qua các cầu nối khác
nhau nếu chúng đang ở trên phân vùng mạng có quá nhiều máy tính. Những
gói tin chứa yêu cầu in này có thể phải trải qua một số bộ định tuyến
khác nhau nếu máy in đích nằm trên một phân vùng mạng khác.

Từ đây các gói tin chứa yêu cầu in sẽ đến card mạng của máy tính đích có
gắn máy in. Sau đó các tín hiệu từ dây cáp mạng được chuyển đổi lại theo
một định dạng mà máy tính có thể hiểu được (Data link Layer). Và rồi
thông tin về địa chỉ định đến sẽ được xác minh khi chỉ ra máy tính nhận
dữ liệu (Network Layer). Ở bộ phận này các gói tin được ráp lại để tạo
nên một tác vụ hoàn thiện (Transport layer). Trong suốt quá trình nhận
các gói tin, máy tính đích phải biết được rằng nó đã nhận được một công
việc in hoàn chỉnh hay chưa (Session layer). Cuối cùng thông tin được
tới phục vụ in (Application layer).

Trong thế giới thực tế, chúng ta thường phải lựa chọn đặt các thành phần
OSI riêng lẻ ở những mức Physical (các loại phương tiện truyền tải),
Data link (card mạng, cầu nối mạng và trình điều khiển card mạng).
Network Layer (bộ định tuyến) và Application (các dịch vụ mà bạn muốn có
trên mạng của mình). Thông thường các lớp Transport, Session và
Presentation được tích hợp sẵn trong các thành phần mạng của hệ điều
hành hay các chương trình mà được sử dụng và không đưa ra các lựa chọn
để chúng ta thay đổi.

1.  Đối chiếu mô hình OSI (mô hình bảy lớp) và mô hình TCP/IP (mô hình
    > bốn lớp)

Với mô hình OSI, chúng ta đã được tham khảo qua ở trên, tuy nhiên ở một
khía cạnh nào đó thì chúng ta cũng không thể không nói đến mô hình
TCP/IP. Bởi mô hình TCP/IP có tính chất quan trọng trong lịch sử truyền
thông, cụ thể là tầm quan trọng trong môi trường truyền thông Internet,
trong viễn thông và các dịch vụ truyền thông khác.

Khái niệm mô hình TCP/IP

Mô hình TCP/IP được bộ quốc phòng Mỹ nghiên cứu và sáng lập ra, để đáp
ứng nhu cầu truyền thông mọi lúc mọi nơi ở bất kỳ điều kiện nào kể cả
trong thời chiến.

Khi kiến trúc tiêu chuẩn OSI xuất hiện thì TCP/IP đã trên con đường phát
triển. Xét một cách chặt chẽ, TCP/IP không tuân theo OSI. Tuy nhiên, hai
mô hình này có những mục tiêu giống nhau và do có sự tương tác giữa các
nhà thiết kế tiêu chuẩn nên 2 mô hình xuất hiện những điểm tương thích.
Cũng chính vì thế, các thuật ngữ của OSI thường được áp dụng cho TCP/IP.
Hình sau đây thể hiện mối quan hệ giữa tiêu chuẩn TCP/IP bốn lớp và mô
hình OSI bảy lớp.

TCP/IP là một bộ giao thức, và một giao thức là một hệ thống các quy
định và thủ tục. Đại đa số phần cứng và phần mềm giúp máy tính tham gia
quá trình trao đổi thông tin đều thực hiện các quy chuẩn của TCP/IP -
người sử dụng không cần phải biết chi tiết các quy chuẩn này.

Một hệ thống giao thức như TCP/IP phải đảm bảo khả năng thực hiện những
công việc sau:

- Cắt thông tin thành những gói dữ liệu để có thể dễ dàng đi qua bộ
    phận truyền tải trung gian.

- Tương tác với phần cứng của thiết bị đầu cuối mạng.

- Xác định địa chỉ nguồn và đích: Máy tính gửi thông tin đi phải có
    thể xác định được nơi gửi đến. Máy tính đích phải nhận ra đâu là
    thông tin gửi cho mình.

- Định tuyến: Hệ thống phải có khả năng hướng dữ liệu tới các tiểu
    mạng, cho dù tiểu mạng nguồn và đích khác nhau về mặt vật lý.

- Kiểm tra lỗi, kiểm soát giao thông và xác nhận: Đối với một phương
    tiện truyền thông tin cậy, máy tính gửi và nhận phải xác định và có
    thể sửa chữa lỗi trong quá trình vận chuyển dữ liệu.

- Chấp nhận dữ liệu từ ứng dụng và truyền nó tới mạng đích.

Để có thể thực hiện các công việc trên, những người sáng tạo ra TCP/IP
đã chia nó thành những phần riêng biệt, theo lý thuyết, hoạt động độc
lập với nhau. Mỗi thành phần chịu một trách nhiệm riêng biệt trong hệ
thống mạng.

Lợi thế của cấu trúc lớp ở chỗ nó cho phép các nhà sản xuất dễ dàng áp
dụng phần mềm giao thức cho các phần cứng và hệ điều hành. Các lớp giao
thức TCP/IP bao gồm:

- Lớp truy cập mạng (Internet Access) – Cung cấp giao diện tương tác
    với mạng vật lý. Format dữ liệu cho bộ phận truyền tải trung gian và
    tạo địa chỉ dữ liệu cho các tiểu mạng dựa trên địa chỉ phần cứng
    vật lý. Cung cấp việc kiểm tra lỗi trong quá trình truyền dữ liệu.

- Lớp truy cập mạng quản lý tất cả các dịch vụ và chức năng cần thiết
    cho việc chuẩn bị đưa dữ liệu sang mạng vật lý. Những trách nhiệm
    này gồm:

    -   - Tương tác với bộ điều hợp mạng của máy tính.

    -   - Điều phối quá trình truyền dữ liệu theo các quy ước xác định.

    -   - Format dữ liệu thành các đơn vị gọi là khung(frame) và đổi
        khung đó thành dòng điện từ hoặc các xung điện, có khả năng di
        chuyển qua bộ phận truyền trung gian.

    -   - Kiểm tra lỗi của các khung dữ liệu gửi tới.

    -   - Bổ sung thông tin kiểm tra lỗi cho các khung gửi đi để máy
        tính nhận có thể phát hiện lỗi.

    -   - Xác nhận việc nhận khung thông tin và gửi lại dữ liệu nếu như
        chưa có xác nhận của bên kia.

Lớp truy cập mạng cũng quy định trình tự tương tác với phần cứng mạng và
tiếp cận bộ phận truyền trung gian.

Lớp Internet – Cung cấp địa chỉ logic, độc lập với phần cứng, để dữ
liệu có thể lướt qua các tiểu mạng có cấu trúc vật lý khác nhau. Cung
cấp chức năng định tuyến để giao lưu lượng giao thông và hỗ trợ việc vận
chuyển liên mạng. Thuật ngữ liên mạng được dùng để đề cập đến các mạng
rộng lớn hơn, kết nối từ nhiều LAN. Tạo sự gắn kết giữa địa chỉ vật lý
và địa chỉ logic.

Lớp vận chuyển (Transport) – Giúp kiểm soát luồng dữ liệu, kiểm tra
lỗi và xác nhận các dịch vụ cho liên mạng. Đóng vai trò giao diện cho
các ứng dụng mạng.

Lớp ứng dụng (Application) – Cung cấp các ứng dụng để giải quyết sự
cố mạng, vận chuyển file, điều khiển từ xa, và các hoạt động Internet.
Đồng thời hỗ trợ giao diện lập trình ứng dụng mạng, cho phép các chương
trình được thiết kế cho một hệ điều hành nào đó có thể truy cập mạng.

Khi hệ thống giao thức TCP/IP chuẩn bị cho một khối dữ liệu di chuyển
trên mạng, mỗi lớp trên máy gửi đi bổ sung thông tin vào khối dữ liệu đó
để các lớp của máy nhận có thể nhận dạng được.

So sánh mô hình OSI và TCP/IP

Ta có một số điểm giống và khác nhau của 2 mô hình như sau:

Giống nhau:

- Cả hai mô hình đều có phân lớp(tầng).

- Cả hai đều có tầng ứng dụng, vận chuyển.

- Kỹ thuật chuyển mạch gói đều được xác nhận và sử dụng.

Khác nhau:

- Tầng ứng dụng của mô hình TCP/IP bao gồm cả tầng trình diễn và tầng
    phiên của mô hình OSI.

- Tầng truy cập mạng của mô hình TCP/IP bao gồm cả tầng liên kết dữ
    liệu và tầng vật lý của mô hình OSI.

Tóm lại mô hình TCP/IP là một mô hình cụ thể trên một hệ máy nào đó, còn
mô hình OSI là mô hình tham chiếu chung cho các hệ máy.
